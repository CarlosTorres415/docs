"use strict";(self.webpackChunkflashbot_docs=self.webpackChunkflashbot_docs||[]).push([[1235],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return h}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)t=s[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),c=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(i.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(t),h=r,m=p["".concat(i,".").concat(h)]||p[h]||u[h]||s;return t?a.createElement(m,o(o({ref:n},d),{},{components:t})):a.createElement(m,o({ref:n},d))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,o=new Array(s);o[0]=p;var l={};for(var i in n)hasOwnProperty.call(n,i)&&(l[i]=n[i]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<s;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},9867:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return i},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var a=t(7462),r=t(3366),s=(t(7294),t(3905)),o=["components"],l={title:"json rpc"},i=void 0,c={unversionedId:"flashbots-protect/api/json-rpc",id:"flashbots-protect/api/json-rpc",isDocsHomePage:!1,title:"json rpc",description:"The Flashbots Protect API exposes a JSON-RPC protocol to send transactions or bundles, get status updates, cancel transactions or bundles, and optionally retrieve recommended ETH network gas fees.",source:"@site/docs/flashbots-protect/api/json-rpc.md",sourceDirName:"flashbots-protect/api",slug:"/flashbots-protect/api/json-rpc",permalink:"/flashbots-protect/api/json-rpc",tags:[],version:"current",frontMatter:{title:"json rpc"},sidebar:"docs",previous:{title:"quick start",permalink:"/flashbots-protect/api/quick-start"},next:{title:"websockets",permalink:"/flashbots-protect/api/websockets"}},d=[{value:"Endpoints",id:"endpoints",children:[]},{value:"How it works",id:"how-it-works",children:[{value:"Sending a single transaction",id:"sending-a-single-transaction",children:[]},{value:"Sending many transactions",id:"sending-many-transactions",children:[]},{value:"Sending and canceling a bundle in progress",id:"sending-and-canceling-a-bundle-in-progress",children:[]},{value:"Recommended fees (optional)",id:"recommended-fees-optional",children:[]}]},{value:"Methods",id:"methods",children:[{value:"eth_sendRawTransaction",id:"eth_sendrawtransaction",children:[]},{value:"eth_sendRawTransactions",id:"eth_sendrawtransactions",children:[]},{value:"eth_getBundleStatusById",id:"eth_getbundlestatusbyid",children:[]},{value:"eth_getTransactionStatusByHash",id:"eth_gettransactionstatusbyhash",children:[]},{value:"eth_cancelBundleById",id:"eth_cancelbundlebyid",children:[]},{value:"eth_cancelBundleByTransactionHash",id:"eth_cancelbundlebytransactionhash",children:[]},{value:"eth_gasFees",id:"eth_gasfees",children:[]}]}],u={toc:d};function p(e){var n=e.components,t=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("p",null,"The Flashbots Protect API exposes a ",(0,s.kt)("a",{parentName:"p",href:"https://www.jsonrpc.org/specification"},"JSON-RPC")," protocol to send transactions or bundles, get status updates, cancel transactions or bundles, and optionally retrieve recommended ETH network gas fees."),(0,s.kt)("p",null,"Note that bundle ID here refers to a unique identifier of bundles for the Flashbots Protect API, not the bundle hash. In a future release we intend to move to use the bundle hash as the unique identifier."),(0,s.kt)("h2",{id:"endpoints"},"Endpoints"),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Staging"),":"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Current version: v1.8.0"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"https://protection-staging.flashbots.net/v1/rpc"))),(0,s.kt)("p",null,(0,s.kt)("strong",{parentName:"p"},"Production"),":"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Current version: v1.8.0"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("inlineCode",{parentName:"li"},"https://protection.flashbots.net/v1/rpc"))),(0,s.kt)("h2",{id:"how-it-works"},"How it works"),(0,s.kt)("h3",{id:"sending-a-single-transaction"},"Sending a single transaction"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"send a transaction using ",(0,s.kt)("strong",{parentName:"li"},"eth_sendRawTransaction"),", the response will include the transaction hash"),(0,s.kt)("li",{parentName:"ol"},"use the transaction hash to regularly query it's status using ",(0,s.kt)("strong",{parentName:"li"},"eth_getTransactionStatusByHash")),(0,s.kt)("li",{parentName:"ol"},"the status can be either",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"PENDING_BUNDLE"),": the bundle is in progess, being sent to miners via flashbots for inclusion"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"FAILED_BUNDLE"),": the bundle has not been included. The reason will be shown in the response error message"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"SUCCESSFUL_BUNDLE"),": the bundle has been included by a miner")))),(0,s.kt)("h3",{id:"sending-many-transactions"},"Sending many transactions"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"send a bundle of transactions using ",(0,s.kt)("strong",{parentName:"li"},"eth_sendRawTransactions"),", the response will include a bundle ID"),(0,s.kt)("li",{parentName:"ol"},"use the bundle ID to regularly query the status of the bundle using ",(0,s.kt)("strong",{parentName:"li"},"eth_getBundleStatusById")),(0,s.kt)("li",{parentName:"ol"},"the status can be either",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"PENDING_BUNDLE"),": the bundle is in progess, being sent to miners via flashbots for inclusion"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"FAILED_BUNDLE"),": the bundle has not been included. The reason will be shown in the response error message"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"SUCCESSFUL_BUNDLE"),": the bundle has been included by a miner")))),(0,s.kt)("h3",{id:"sending-and-canceling-a-bundle-in-progress"},"Sending and canceling a bundle in progress"),(0,s.kt)("ol",null,(0,s.kt)("li",{parentName:"ol"},"send a transaction using ",(0,s.kt)("strong",{parentName:"li"},"eth_sendRawTransaction")," or ",(0,s.kt)("strong",{parentName:"li"},"eth_sendRawTransactions"),", the response will include a bundle ID or transaction hash."),(0,s.kt)("li",{parentName:"ol"},"use the bundle ID to cancel the bundle using ",(0,s.kt)("strong",{parentName:"li"},"eth_cancelBundleById")," or use the transaction hash to cancel the bundle containing the transaction using ",(0,s.kt)("strong",{parentName:"li"},"eth_cancelBundleByTransactionHash")),(0,s.kt)("li",{parentName:"ol"},"use the bundle ID or transaction hash to regularly query the status using ",(0,s.kt)("strong",{parentName:"li"},"eth_getBundleStatusById")," or ",(0,s.kt)("strong",{parentName:"li"},"eth_getTransactionStatusByHash")),(0,s.kt)("li",{parentName:"ol"},"the status can be either",(0,s.kt)("ul",{parentName:"li"},(0,s.kt)("li",{parentName:"ul"},"any of the above statuses"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"CANCEL_BUNDLE_SUCCESSFUL"),": the bundle was canceled successfully")))),(0,s.kt)("h3",{id:"recommended-fees-optional"},"Recommended fees (optional)"),(0,s.kt)("p",null,"To build a successful transaction, it is important to include enough fees to cover both the Ethereum ",(0,s.kt)("strong",{parentName:"p"},"baseFee")," as well as the ",(0,s.kt)("strong",{parentName:"p"},"miner tip")," (incentive for a miner to include your transaction in a block). It may be complex to estimate what the fees should be, especially when the network is heavily used and more transactions are competing with each other."),(0,s.kt)("p",null,"To help on that matter, the API provides a method that will send back ",(0,s.kt)("strong",{parentName:"p"},"recommended fees"),". Those have been adjusted to ensure a good chance of inclusion while avoiding overpayment. The method ",(0,s.kt)("strong",{parentName:"p"},"eth_gasFees")," will send back fees organized in three tiers, so you can choose which one fits best your use case"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"low"),": lowest chance of inclusion, it will take more time to get included. Higher risk of not covering the baseFee in times of heavy traffic"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"medium"),": good chance of inclusion, it will be faster to get included. Medium risk of not covering the baseFee in times of heavy traffic"),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"high"),": highest chance and fastest inclusion. Lowest risk of not covering the baseFee in times of heavy traffic")),(0,s.kt)("h2",{id:"methods"},"Methods"),(0,s.kt)("h3",{id:"eth_sendrawtransaction"},"eth_sendRawTransaction"),(0,s.kt)("p",null,"Sends a raw transaction."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendRawTransaction",\n  "params": [] // Array[String], A list containing a single signed transaction\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendRawTransaction",\n  "params": ["0x123abc..."]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": "0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f" // NOTE: this is the transaction hash\n}\n')),(0,s.kt)("h3",{id:"eth_sendrawtransactions"},"eth_sendRawTransactions"),(0,s.kt)("p",null,"Sends one or many raw transactions."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendRawTransactions",\n  "params": [] // Array[String], A list of signed transactions\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_sendRawTransactions",\n  "params": ["0x123abc..."]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": "0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f" // NOTE: this is the Flashbots Protect bundle id\n}\n')),(0,s.kt)("h3",{id:"eth_getbundlestatusbyid"},"eth_getBundleStatusById"),(0,s.kt)("p",null,"Get the status of a bundle"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_getBundleStatusById",\n  "params": [] // Array[String], An array containing a single bundle id returned from eth_sendRawTransaction\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_getBundleStatusById",\n  "params": ["0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f"]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": {\n    status,  // String, status of the bundle\n    error,   // String, error message\n    message, // String, details about the status or error\n    id       // String, id of the bundle\n  }\n}\n')),(0,s.kt)("h3",{id:"eth_gettransactionstatusbyhash"},"eth_getTransactionStatusByHash"),(0,s.kt)("p",null,"Get the status of a transaction"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_getTransactionStatusByHash",\n  "params": [] // Array[String], An array containing a single bundle id returned from eth_sendRawTransaction\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_getTransactionStatusByHash",\n  "params": ["0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f"]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": {\n    status,  // String, status of the bundle\n    error,   // String, error message\n    message, // String, details about the status or error\n    id       // String, id of the bundle\n  }\n}\n')),(0,s.kt)("h3",{id:"eth_cancelbundlebyid"},"eth_cancelBundleById"),(0,s.kt)("p",null,"Cancel a bundle by bundle ID. Requests a cancellation of a bundle if it is still processing. This does not guarantee that the bundle will be cancelled."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelBundleById",\n  "params": [] // Array[String], An array containing a single bundle id returned from eth_sendRawTransaction\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelBundleById",\n  "params": ["0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f"]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": true // Boolean, whether the request was sent successfully\n}\n')),(0,s.kt)("h3",{id:"eth_cancelbundlebytransactionhash"},"eth_cancelBundleByTransactionHash"),(0,s.kt)("p",null,"Cancel a bundle by transaction hash. Requests a cancellation of a bundle if it is still processing. This does not guarantee that the bundle will be cancelled."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelBundleByTransactionHash",\n  "params": [] // Array[String], An array containing a single transaction hash\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_cancelBundleByTransactionHash",\n  "params": ["0x2228f5d8954ce31dc1601a8ba264dbd401bf1428388ce88238932815c5d6f23f"]\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": true // Boolean, whether the request was sent successfully\n}\n')),(0,s.kt)("h3",{id:"eth_gasfees"},"eth_gasFees"),(0,s.kt)("p",null,"Get current gas fees"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_gasFees",\n  "params": [] // Array[], An empty array\n}\n')),(0,s.kt)("p",null,"example:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "method": "eth_gasFees",\n  "params: []\n}\n')),(0,s.kt)("p",null,"example response:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": "1",\n  "result": {\n    block,                     // Number, current block number\n    baseFeePerGas,             // String, a hex number for the baseFee at the current block\n    default: {\n      maxFeePerGas,            // String, a hex number for the recommended default maxFeePerGas\n      maxPriorityFeePerGas,    // String, a hex number for the recommended default maxPriorityFeePerGas\n    },\n    low: {\n      maxFeePerGas,            // String, a hex number for the recommended low maxFeePerGas\n      maxPriorityFeePerGas,    // String, a hex number for the recommended low maxPriorityFeePerGas\n    },\n    med: {\n      maxFeePerGas,            // String, a hex number for the recommended med maxFeePerGas\n      maxPriorityFeePerGas,    // String, a hex number for the recommended med maxPriorityFeePerGas\n    },\n    high: {\n      maxFeePerGas,            // String, a hex number for the recommended high maxFeePerGas\n      maxPriorityFeePerGas,    // String, a hex number for the recommended high maxPriorityFeePerGas\n    },\n  }\n}\n')))}p.isMDXComponent=!0}}]);